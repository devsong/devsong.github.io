<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Innodb Lock相关介绍与实现 | devsong's website</title> <meta name="author" content="guan zhisong"/> <meta name="description" content="记录日常学习的代码、问题以及个人对相关技术的一些思考与见解 "/> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"/> <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚛️</text></svg>"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://devsong.github.io/blog/2022/08/004-lock/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">devsong's website</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">关于</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">博客<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">github</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">个人简介</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Innodb Lock相关介绍与实现</h1> <p class="post-meta">August 20, 2022</p> <p class="post-tags"> <a href="/blog/2022"> <i class="fas fa-calendar fa-sm"></i> 2022 </a>   ·   <a href="/blog/tag/blogs"> <i class="fas fa-hashtag fa-sm"></i> blogs</a>   <a href="/blog/tag/mysql"> <i class="fas fa-hashtag fa-sm"></i> mysql</a>   <a href="/blog/tag/innodb"> <i class="fas fa-hashtag fa-sm"></i> innodb</a>   <a href="/blog/tag/lock"> <i class="fas fa-hashtag fa-sm"></i> lock</a>     ·   <a href="/blog/category/mysql"> <i class="fas fa-tag fa-sm"></i> mysql</a>   </p> </header> <article class="post-content"> <h3 id="innodb-锁">Innodb 锁</h3> <p>通过前面两节事务、MVCC介绍都出现了锁的影子,下面我们来看下Innodb中锁的内容</p> <p>操作系统以及各个编程语言中都存在关于锁相关内容的介绍,锁的算法以及基础的原理是一致的，不同点主要体现在以下几点</p> <table> <thead> <tr> <th> </th> <th style="text-align: left">数据库锁</th> <th style="text-align: left">操作系统/编程语言</th> </tr> </thead> <tbody> <tr> <td>目标对象</td> <td style="text-align: left">事务</td> <td style="text-align: left">线程</td> </tr> <tr> <td>受保护对象</td> <td style="text-align: left">数据库行记录</td> <td style="text-align: left">内存数据结构/临界资源/共享变量</td> </tr> <tr> <td>持续时间</td> <td style="text-align: left">事务生命周期,时间较长</td> <td style="text-align: left">代码块，时间较短</td> </tr> <tr> <td>类型</td> <td style="text-align: left">表锁/行锁/意向锁</td> <td style="text-align: left">读写锁、互斥量</td> </tr> </tbody> </table> <p>通过上表可以直观的看出来数据库锁与操作系统、编程语言中的锁区别，Mysql由C语言开发,运行与各个宿主机操作系统之上，因此在运行中的mysql实例中同时存在上述两种类型的锁，今天的主角是数据库锁</p> <h3 id="mysql中锁的分类">Mysql中锁的分类</h3> <p>按照大的维度进行分类</p> <ul> <li>表锁，锁住整表，通常用于数据的初始化，大批量的数据迁移，一般是离线操作或者业务低峰时期</li> <li>行锁，基于数据行的锁</li> <li>意向锁,一种介于表锁于行锁之间锁类型，下文会介绍</li> </ul> <p>按照读写类型进行分类</p> <ul> <li>读锁/共享锁，亦称之为S锁</li> <li>写锁/排它锁，亦称之为X锁</li> </ul> <p>上述三种类型的锁，每种又有相对应的读锁于写锁,读写锁的兼容可以参见下表</p> <table> <thead> <tr> <th style="text-align: left">操作类型</th> <th style="text-align: left">S</th> <th style="text-align: left">X</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">S</td> <td style="text-align: left">兼容</td> <td style="text-align: left">不兼容</td> </tr> <tr> <td style="text-align: left">X</td> <td style="text-align: left">不兼容</td> <td style="text-align: left">不兼容</td> </tr> </tbody> </table> <p>注意，此处的读写锁兼容不要与上文MVCC章节中介绍的读写操作搞混，表锁以及行锁的读写锁操作类型兼容性均与上表一致,意向锁的兼容类型比较特殊，下文会介绍</p> <p>来看一个表锁的示例</p> <table> <thead> <tr> <th style="text-align: left">step</th> <th>Tx</th> <th style="text-align: left">Session1</th> <th>Tx</th> <th style="text-align: left">Session2</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">1</td> <td>tx1</td> <td style="text-align: left">begin;</td> <td>tx2</td> <td style="text-align: left">begin;</td> </tr> <tr> <td style="text-align: left">2</td> <td>tx1</td> <td style="text-align: left">lock tables account read;</td> <td>tx2</td> <td style="text-align: left">select id,balance,username from account where id = 1;</td> </tr> <tr> <td style="text-align: left">3</td> <td>tx1</td> <td style="text-align: left">select * from account where id =1;</td> <td>tx2</td> <td style="text-align: left">insert into account values(NULL,10,’footer’,now(),now());</td> </tr> <tr> <td style="text-align: left">4</td> <td>tx1</td> <td style="text-align: left">insert into account values(NULL,10,’foobar’,now(),now());</td> <td>tx2</td> <td style="text-align: left">– waiting until tx1 unlock tables;</td> </tr> <tr> <td style="text-align: left">5</td> <td>tx1</td> <td style="text-align: left">ERROR 1099 (HY000): Table ‘account’ was locked with a READ lock and can’t be updated</td> <td>tx2</td> <td style="text-align: left"> </td> </tr> <tr> <td style="text-align: left">6</td> <td>tx1</td> <td style="text-align: left">unlock tables;</td> <td>tx2</td> <td style="text-align: left">commit;</td> </tr> </tbody> </table> <p>通过上述示例可以知道</p> <ul> <li>表锁在S锁的模式下，其他事务无法修改，只能进行读取，无法进行任何写入操作，参见上述读写锁的兼容性描述</li> <li>表锁在S锁的模式下，当前事务亦不能进行数据的修改操作，参见上述step5 session1的错误输出</li> </ul> <p>表锁的X锁模式与上述类似,不同的是在加X锁的情况下，其他的事务读操作会被阻塞(X锁于其他任何类型的锁都不兼容)，此处不在放具体的示例，感兴趣的同学可以执行下述的语句</p> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td> <td class="rouge-code"><pre><span class="k">lock</span> <span class="n">tables</span> <span class="n">account</span> <span class="k">write</span><span class="p">;</span>
<span class="p">...</span> <span class="k">do</span> <span class="n">something</span> <span class="k">for</span> <span class="k">write</span> <span class="k">operation</span>
<span class="n">unlock</span> <span class="n">tables</span><span class="p">;</span>
</pre></td> </tr></tbody></table></code></pre></div></div> <h4 id="意向锁">意向锁</h4> <p>上文提到意向锁是一种介于行锁于表锁之间的锁定，我们知道innodb底层是基于数据页(16kb)的,一张表物理上实际由N多个16KB的数据页构成，带来的一个问题就是锁定上粗细粒度的问题，表锁过于粗，行锁某写场景下过于细，意向锁的出现就是为了支持在不同粒度上进行加锁，意向锁也分为读/写锁，通常用IS/IX指代,</p> <p>举两个例子</p> <ul> <li>若需要对记录上X锁,则需要对记录所属的库/表/页/记录先上意向锁IX,若中间有任何一个环节造成IX锁等待，那么该环节需要等待更粗粒度的锁完成后，释放相关的意向锁资源方可继续进行</li> <li>若需要对记录上S锁,则需要对记录所属的库/表/页/记录先上意向锁IS,若中间有任何一个环节造成IS锁等待，那么该环节需要等待更粗粒度的锁完成后，释放相关的意向锁资源方可继续进行</li> </ul> <p>需要注意的是，innodb支持的意向锁是表级别的(参见官方文档:<a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-locking.html" target="_blank" rel="noopener noreferrer">mysql锁</a>)，意向锁与其他类型锁之间的兼容下可参见下表</p> <table> <thead> <tr> <th style="text-align: left">操作类型</th> <th>IS</th> <th>IX</th> <th style="text-align: left">S</th> <th style="text-align: left">X</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">IS</td> <td>兼容</td> <td>兼容</td> <td style="text-align: left">兼容</td> <td style="text-align: left">不兼容</td> </tr> <tr> <td style="text-align: left">IX</td> <td>兼容</td> <td>兼容</td> <td style="text-align: left">不兼容</td> <td style="text-align: left">不兼容</td> </tr> <tr> <td style="text-align: left">S</td> <td>兼容</td> <td>不兼容</td> <td style="text-align: left">兼容</td> <td style="text-align: left">不兼容</td> </tr> <tr> <td style="text-align: left">X</td> <td>不兼容</td> <td>不兼容</td> <td style="text-align: left">不兼容</td> <td style="text-align: left">不兼容</td> </tr> </tbody> </table> <p>可以看到X锁仍然是不与其他任何类型的锁兼容</p> <h3 id="行锁">行锁</h3> <p>Innodb 支持三种类型的行锁</p> <ul> <li>Record锁,最简单的基于锁定行</li> <li>Gap锁,锁定区间</li> <li>Next-Key锁，锁定区间，包括行记录本身</li> </ul> <p>下述建表语句数据用于演示行锁的几种case</p> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td> <td class="rouge-code"><pre><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nv">`t`</span> <span class="p">(</span>
  <span class="nv">`id`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="nv">`c`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="nv">`d`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="nv">`id`</span><span class="p">),</span>
  <span class="k">KEY</span> <span class="nv">`c`</span> <span class="p">(</span><span class="nv">`c`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="p">;</span>

<span class="k">insert</span> <span class="k">into</span> <span class="n">t</span> <span class="k">values</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">),(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">),(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">),(</span><span class="mi">40</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">40</span><span class="p">),(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">),(</span><span class="mi">60</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">60</span><span class="p">);</span>
</pre></td> </tr></tbody></table></code></pre></div></div> <ul> <li>Record锁是使用的比较多也是最简单的一种行锁,诸如下述语句使用的就是行锁</li> </ul> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td> <td class="rouge-code"><pre><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">t</span> <span class="k">where</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">10</span> <span class="k">lock</span> <span class="k">in</span> <span class="k">share</span> <span class="k">mode</span><span class="p">;</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">t</span> <span class="k">where</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">10</span> <span class="k">for</span> <span class="k">update</span><span class="p">;</span>
</pre></td> </tr></tbody></table></code></pre></div></div> <p>上述SQL会基于id=10的行主键生成行锁数据</p> <ul> <li>GAP锁定</li> </ul> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td> <td class="rouge-code"><pre><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">t</span> <span class="k">where</span> <span class="n">id</span> <span class="o">&gt;</span><span class="mi">10</span> <span class="k">and</span> <span class="n">id</span><span class="o">&lt;</span><span class="mi">15</span> <span class="k">for</span> <span class="k">update</span><span class="p">;</span>
</pre></td> </tr></tbody></table></code></pre></div></div> <p>看下下述示例:</p> <table> <thead> <tr> <th style="text-align: left">step</th> <th>Tx</th> <th style="text-align: left">Session1</th> <th>Tx</th> <th style="text-align: left">Session2</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">1</td> <td>tx1</td> <td style="text-align: left">begin;</td> <td>tx2</td> <td style="text-align: left">begin;</td> </tr> <tr> <td style="text-align: left">2</td> <td>tx1</td> <td style="text-align: left">select * from t where id &gt;10 and id&lt;15 for update;</td> <td>tx2</td> <td style="text-align: left">insert into t values(8,8,8); – Query OK, 1 row affected (0.00 sec)</td> </tr> <tr> <td style="text-align: left">3</td> <td>tx1</td> <td style="text-align: left"> </td> <td>tx2</td> <td style="text-align: left">insert into t values(21,21,21); – Query OK, 1 row affected (0.00 sec)</td> </tr> <tr> <td style="text-align: left">4</td> <td>tx1</td> <td style="text-align: left"> </td> <td>tx2</td> <td style="text-align: left">insert into t values(18,18,18); – waiting until tx1 commit or rollback</td> </tr> <tr> <td style="text-align: left">5</td> <td>tx1</td> <td style="text-align: left">commit;</td> <td>tx2</td> <td style="text-align: left">commit;</td> </tr> </tbody> </table> <p>step 2 tx1 session1 执行<code class="language-plaintext highlighter-rouge">select * from t where id &gt;10 and id&lt;15 for update;</code>范围查询，mysql表中数据想为0，10，20，30，40，50，60，针对此范围查询，生成的GAP锁定区间为(10,20),前后均为开区间</p> <ul> <li>Next-Key 锁定</li> </ul> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td> <td class="rouge-code"><pre><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">t</span> <span class="k">where</span> <span class="k">c</span> <span class="o">&gt;</span><span class="mi">10</span> <span class="k">and</span> <span class="k">c</span><span class="o">&lt;=</span><span class="mi">20</span> <span class="k">for</span> <span class="k">update</span><span class="p">;</span>
</pre></td> </tr></tbody></table></code></pre></div></div> <p>如下辅助索引示例</p> <table> <thead> <tr> <th style="text-align: left">step</th> <th>Tx</th> <th style="text-align: left">Session1</th> <th>Tx</th> <th style="text-align: left">Session2</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">1</td> <td>tx1</td> <td style="text-align: left">begin;</td> <td>tx2</td> <td style="text-align: left">begin;</td> </tr> <tr> <td style="text-align: left">2</td> <td>tx1</td> <td style="text-align: left">select * from t where id &gt;10 and id&lt;=20 for update;</td> <td>tx2</td> <td style="text-align: left">insert into t values(8,8,8); – Query OK, 1 row affected (0.00 sec)</td> </tr> <tr> <td style="text-align: left">3</td> <td>tx1</td> <td style="text-align: left"> </td> <td>tx2</td> <td style="text-align: left">insert into t values(21,21,21); –waiting until tx1 commit or rollback</td> </tr> <tr> <td style="text-align: left">4</td> <td>tx1</td> <td style="text-align: left"> </td> <td>tx2</td> <td style="text-align: left">insert into t values(31,31,31); – Query OK, 1 row affected (0.00 sec)</td> </tr> <tr> <td style="text-align: left"> </td> <td> </td> <td style="text-align: left"> </td> <td> </td> <td style="text-align: left">update t set d=d+1 where c=30;–waiting until tx1 commit or rollback</td> </tr> <tr> <td style="text-align: left">5</td> <td>tx1</td> <td style="text-align: left">commit;</td> <td>tx2</td> <td style="text-align: left">commit;</td> </tr> </tbody> </table> <p>step2 tx1 session1 执行<code class="language-plaintext highlighter-rouge">select * from t where id &gt;10 and id&lt;=20 for update;</code> 辅助索引范围查询,针对此查询的锁定区间为辅助索引(10,20],(20,30],session2 中的三个insert语句以及update语句可以验证猜想</p> <h3 id="一点总结">一点总结</h3> <p>实际上，innodb在默认的RR隔离级别下，默认使用next-key锁定，满足一定条件会退化为行锁或者gap锁定，行锁住要针对主键/唯一索引，gap锁住要针对范围查询，上述两个示例是两个最简单的示例，实际上的锁定规则远比此复杂,索引唯一性、查找类型(等值or范围)、全表扫描、事务隔离级别等均有一定程度的关系，详细的示例可参见下述链接 <a href="http://www.heartthinkdo.com/?p=3741#22" target="_blank" rel="noopener noreferrer">http://www.heartthinkdo.com/?p=3741#22</a></p> <p>三种行锁的规则为：</p> <p>（1）Next-Key是默认锁。左开右闭,理解：右闭是行锁（一行记录），左开-右开是间隙锁，所以某种程度上Next-KEY=行锁+间隙锁</p> <p>（2）行锁场景</p> <ul> <li>主键、唯一索引上等值查询，对主键B+树上元素。</li> <li>普通索引需要回表（等值&amp;范围）， 主键B+树上满足条件的元素都是行锁。</li> </ul> <p>（2）间隙锁场景，Innodb在RR级别解决幻读就是靠间隙锁实现</p> <ul> <li>主键等值查询，只有在未找到元素时候，需要对向右第一个元素加间隙锁。</li> <li>主键范围查询时，无论是否有结果，需要向右第一个元素加Next-Key。</li> <li>二级索引等值查询时，无论是否命中结果，需要对向右第一个元素加间隙锁。</li> </ul> </article> </div> <style>table{border-left:1px solid #000;border-top:1px solid #000;width:100%;word-wrap:break-word;word-break:break-all}table th{text-align:left;min-width:60px;max-width:300px}table th,td{border-right:1px solid #000;border-bottom:1px solid #000}</style> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 guan zhisong. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/devsong/devsong.github.io" target="_blank" rel="noopener noreferrer">devsong.github.io</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="noopener noreferrer">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script type="text/javascript">$(function(){$('[data-toggle="tooltip"]').tooltip()});</script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> </body> </html>